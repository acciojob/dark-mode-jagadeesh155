<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dark Mode Preference</title>
  <style>
    /* Default light theme */
    body {
      background-color: white;
      color: black;
      font-family: Arial, sans-serif;
      transition: background-color 0.3s, color 0.3s;
      padding: 20px;
    }

    /* Dark theme */
    body.dark {
      background-color: #121212;
      color: #e0e0e0;
    }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin-bottom: 20px;
    }

    body.dark button {
      background-color: #333;
      color: #fff;
    }

    body button {
      background-color: #ddd;
      color: #000;
    }
  </style>
</head>
<body>
  <button id="toggleTheme">Toggle Dark Mode</button>
  <h1>Welcome!</h1>
  <p>Your theme preference will be remembered across visits.</p>

  <script>
    const toggleBtn = document.getElementById('toggleTheme');

    // Function to update button text
    function updateButton() {
      toggleBtn.textContent = document.body.classList.contains('dark') 
        ? "Switch to Light Mode" 
        : "Switch to Dark Mode";
    }

    // Load theme from localStorage or system preference
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      document.body.classList.add('dark');
    } else if (!savedTheme) {
      // No saved preference, use system preference
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
    }

    updateButton();

    // Toggle dark mode manually
    toggleBtn.addEventListener('click', () => {
      document.body.classList.toggle('dark');

      // Save preference
      localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');

      updateButton();
    });
  </script>
</body>
</html>
